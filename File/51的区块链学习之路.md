# 51的区块链学习之路

笔者是一个区块链技术小白，记录下自己区块链技术的学习轨迹和体验，便于后续回顾参考。



## 第一阶段

2020.09.04~2020.09.09

### 1. 初识

- [一个故事告诉你比特币的原理及运作机制](http://blog.codinglabs.org/articles/bitcoin-mechanism-make-easy.html)

  该文章讲以故事的形式，讲述了交易过程中可能遇到的问题，以及比特币是如何解决这些问题的。

  > **阅读建议**：重点理解该文中提到的交易过程中遇到的问题，目的在于对比特币解决的问题形成初步概念。对于笔者这样零基础的同学来说，具体的解决方案理解起来有些困难，能够了解解决思路即可，不用过于深究方案细节。

  

### 2. 溯源

- 《比特币白皮书》 [英文原版](https://bitcoin.org/bitcoin.pdf) [中文译版](https://www.8btc.com/wiki/bitcoin-a-peer-to-peer-electronic-cash-system)

  该文章为区块链技术的起源，描述了比特币这样一个完备的电子现金系统。后人根据该系统的设计思路提取出了区块链技术。

  > **阅读建议**：该文章很重要，笔者建议围绕此文内容展开区块链基础概念的学习。阅读过程中建议对文中全部信息进行理解，单次完成理解比较困难，建议进行多遍阅读，过程中不断补充相关知识点。相关知识点补充可以参见下一节内容。



### 3. 知识点补充

#### 3.1 《区块链：技术驱动金融》

该书对比特币使用到的一些技术进行了较为基础的讲解，除核心内容外，还花费了许多笔墨对不同技术产生的场景与变革历史娓娓道来，是一本故事向的入门书籍。笔者仅阅读了其前5章内容，现对其各章内容给出阅读总结和建议。

- 第1章：密码学及加密货币概述

  > **总结和建议**：
  >
  > 该章节要点：
  >
  > 1. 理解哈希函数及其特性，以及SHA256算法（P4-P14）
  > 2. 哈希指针与区块链的数据结构 （P14-P19）
  > 3. 数字签名方案及其特性 （P19-P24）
  >
  > 该章节后续小节分别讲述了公钥即身份技巧与两种简单加密货币的介绍，笔者认为这部分内容作为扩展阅读即可，存在于该章节的目的主要用于引出比特币的匿名特性与去中心化特性的思考，与该章节内容关系不大。

- 第2章：比特币如何做到去中心化

  > **总结和建议**：该章节通过思路引导的方式讲述了去中心化过程中遇到和解决的各种问题，并未对比特币的去中心化方案进行提炼，没有清晰的行文脉络，笔者阅读时有一种找不到重点的感受。建议在阅读中带着以下问题阅读：
  >
  > 1. 什么是分布式共识？要达成分布式共识，面临的问题有哪些？
  > 2. 什么是双重支付？比特币如何防止双重支付？
  > 3. 比特币的奖励机制与工作量证明机制是怎样的？提出这两种机制的目的在于？

- 第3章：比特币的运行机制

  > **总结和建议**：
  >
  > 该章节要点：
  >
  > 1. 比特币交易数据结构（P69-P73）
  > 2. 比特币区块数据结构（P84-P86）
  > 3. 比特币网络（P86-P93）
  >
  > 该章节其余部分讲述了比特币脚本与比特币协议修订的内容，笔者认为这方面内容比较偏底层，不建议纳入基础学习范畴，可以作为扩展阅读。

- 第4章：如何储存和使用比特币

  > **总结和建议**：该章节讲述了比特币的存储和使用方式，绝大部分内容建议仅作为补充了解，不必纳入基础学习范畴，笔者认为该章节中有必要重点了解的内容包括：
  >
  > - 密钥分存和密钥共享（P110-P115）

- 第5章：比特币挖矿

  > **总结和建议**：该章节介绍了比特币挖矿的行为模式与历史演进，建议仅作为补充了解，不必纳入基础学习范畴。阅读该章节可以对区块的产生过程有更深刻的体会。

#### 3.2 《区块链：从数字货币到信用社会》

该书从区块链的起源和本质出发，全面地讲述了区块链的基础知识，行文条理清晰，重点突出，是一本非常适合区块链技术初学者入门的好书。笔者仅阅读了其前4章内容，现对其各章内容给出阅读建议。

- 第1章：区块链创世纪

  > **总结和建议**：
  >
  > 整章分为四个篇章：
  >
  > - 第一篇章：描绘了加密货币的发展轨迹，有意思的是，作者还在该章节中加入了其对比特币创始人中本聪的理解与评价；
  >
  > - 第二篇章：对比了三种货币体系的特性，拉近了读者与比特币之间的距离；
  >
  > - 第三篇章：讲述了交易过程中信用评价的重要性；
  >
  > - 第四篇章：从记账与结算的角度出发，讲述了区块链作为分布式账本技术的优势。
  >
  > 建议通篇阅读。

- 第2章：区块链基础

  > **总结和建议**：
  >
  > 该章介绍了区块链的基本概念与知识，包括：
  >
  > - 分类（公共区块链、共同体区块链、私有区块链）
  > - 特征（去中心化、透明性、开放性、自治性、信息不可篡改、匿名性）
  > - 工作流程
  > - 共识机制（PoW、PoW+PoS、PoS、DPoS、RCP）
  > - 区块链面临的其它问题（区块体积、交易确认延时与频率上限、现实落地的阻碍）
  >
  > 建议通篇阅读。

- 第3章：区块链进阶

  > **总结和建议**：
  >
  > 该章介绍了三种区块链相关技术：SPV、侧链与闪电网络。在区块链的基础学习中，建议对SPV与闪电网络进行了解，有助于帮助我们理解区块的数据结构与区块间的交互方式，侧链可作简单的初步了解。

- 第4章：智能合约

  > **总结和建议**：
  >
  > 该章简要介绍了智能合约的起源、定义、与传统合约的区别和未来的发展趋势，建议通篇阅读。



### 4. 第一阶段小结

第一阶段主要目的在于理解《比特币白皮书》一文提到的各种特性与方案，截止至第一阶段完成，笔者基本能够读懂全文，并能理解其中提到的技术方案的设计思路，但细节还未进行深入的推敲与验证。有待后续补充。

辅助理解的方式主要为书籍阅读，笔者阅读了两本书籍： 

A.《区块链：技术驱动金融》

B.《区块链：从数字货币到信用社会》

两本书籍有以下差异：

| 《区块链：技术驱动金融》                                     | 《区块链：从数字货币到信用社会》                             |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 核心：比特币                                                 | 核心：区块链                                                 |
| 技术细节内容多                                               | 基本不涉及技术细节                                           |
| 故事向，重点不突出                                           | 教材向，重点突出，条理清晰                                   |
| 阅读理解难度低，如果为入门学习建议根据本文总结的要点来阅读，约2~3天可以完成前4章要点阅读，其它部分可以留待后续补充了解 | 阅读理解难度低，建议通读，适合作为区块链概论教材供小白学习，约2天可以完成前4章阅读 |

建议优先阅读《区块链：从数字货币到信用社会》



## 第二阶段

2020.09.11~2020.09.16

### 1. Hyperledger Fabric官方文档阅读

由于项目中使用了Hyperledger Fabric，为了贴合项目需求，第二阶段主要内容为学习了解该框架，学习方式为阅读该框架[官方文档](https://hyperledger-fabric.readthedocs.io/en/release-1.4/index.html)。接下来简要谈谈学习感受。

笔者重点阅读了以下章节：

- Introduction

- Key Concepts

- Getting Started

- Developing Applications

- Tutorials

文档内容十分全面，采用逐层展开的形式讲述Fabric框架。

Introduction的内容包含Hyperledger Fabric的一些特性介绍，在阅读后面的内容之前，这些内容可能会让你不明所以且不会对你的学习过程造成帮助——它声称它具有某某特性，但你并不清楚它是如何做到的。在看到这些内容时可以不必深究和记忆，继续往下看。当阅读并掌握后面的内容后，再回过头来阅读Introduction中的内容，也许会更有体会。

笔者的主要精力放在阅读Key Concepts章节。该章节的每一个小节的内容都应该详细阅读，这会对你后续的实操部分提供重要的指导意义。笔者在阅读该部分时，尽力使用一些已经了解的概念帮助理解，例如：

- 区块链网络中的peer如果看做是微信用户，那么channel就好像是拉出来的微信群，用户可以加入不同的群，群信息只对群内用户可见
- Ledger的两个组成部分：world state与blockchain，就像MySQL数据库中的data与binlog一样，data作为结构化的数据更便于查询，binlog记录了数据的每一次变化。如果从头开始追溯binlog，也能得到当前的data值。

Getting Started与Tutorials这两个章节的内容偏向于实战，建议放到后面阅读，可以优先阅读Developing Applications章节。

Developing Applications章节描述了框架的具体应用场景，能够较好地帮助我们将Key Concepts中提到的概念串联起来。


### 2. 构建示例网络与运行Fabcar智能合约

笔者参照Fabric官方文档中的教程构建了示例网络，总体来说相对顺利（下午+晚上），但过程中也遇到了一些小坑，现作一个简要记录以供参考。

> 操作系统：CentOS 7
>
> Fabric文档版本：release-1.4

构建示例网络操作步骤如下：

1. 参照Getting Started - Prerequisites进行环境搭建

   - docker
   - docker-compose
   - Go
   - Node.js

   笔者在安装docker-compose时使用的是root用户，在运行部分脚本创建目录时出现了access denied的问题，建议搭建环境时使用非root用户，通过sudo命令安装。
   建议检查Python版本，笔者使用的Python版本为2.7，在后续搭建环境时遇到了相关版本兼容性的警告，建议后续安装使用Python 3。

2. 参照Getting Started - Install Samples, Binaries and Docker Images进行环境搭建

   - checkout fabric-samples
   - 创建bootstrap.sh并执行

3. 参照Tutorials - Building Your First Network-Install - prerequisites启动网络

   - 执行`byfn.sh generate`
   - 执行`byfn.sh up -l node`



运行Fabcar智能合约操作步骤如下：

1. 参照Tutorials - Writing Your First Application执行

   笔者在执行npm时使用的是root用户，出现了Hit error EACCES: permission denied的问题，参考[这个方案](https://blog.csdn.net/biao0309/article/details/90977752)后通过以下参数解决了问题：
   
   `npm install --production --unsafe-perm=true --allow-root`



### 3. 第二阶段小结

第二阶段主要内容为学习Hyperledger Fabric官方文档。笔者花费了约4天时间，粗略地阅读了文档（跳过了许多一时难以理解的内容），并基于1.4版本构建了第一个网络。但这样的了解是远远不够的，笔者认为还需要在接下来的项目应用中加深对该框架的了解，相信具有深度应用经验后，会对框架的一些特性具有更深刻的体会。

另外，在搭建Linux下的环境时，建议全流程使用**非root用户**，这可能会帮助你绕过许多困难。

